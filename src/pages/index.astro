---
import Layout from "../layouts/Layout.astro";

import ButtonGroup from "../components/ButtonGroup.astro";
import ButtonLink from "../components/ButtonLink.astro";
import Icon from "../components/Icon.astro";
import Link from "../components/Link.astro";
import VisuallyHidden from "../components/VisuallyHidden.astro";

const URL_PREFIX = "https://github.com/martpie/museeks/releases/download/";
const VERSION = "0.23.0";
---

<Layout
  title="Museeks - A simple, clean, and cross-platform music player"
  description="Museeks is a simple, clean, and cross-platform music player, focusing on simple features, well crafted."
>
  <div class="container">
    {/* SCREENSHOT */}
    <div class="screenshotWrapper">
      <img
        class="screenshot"
        src="./screenshot.png"
        alt="A screenshot of Museeks"
      />
    </div>

    {/* MAIN (left content) */}
    <main class="main">
      <div class="downloads">
        <h2 class="downloadsTitle">
          A simple, clean, and cross-platform music player
        </h2>

        <p class="downloadsMetas textMuted">
          latest version: {VERSION}
          |
          <Link
            href={`https://github.com/martpie/museeks/releases/tag/${VERSION}`}
            openInNewTab
          >
            changes
          </Link>
          |
          <Link href="https://github.com/martpie/museeks/releases" openInNewTab>
            other releases
          </Link>
        </p>

        <div class="allDownloads">
          {/* MAC */}
          <div class="downloadsMac">
            <Icon class="osIcon" name="apple" />
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_universal.dmg`}
                use="primary"
                expand
              >
                Apple Silicon / Intel
              </ButtonLink>
            </ButtonGroup>
          </div>

          {/* WINDOWS */}
          <div class="downloadsWindows">
            <Icon class="osIcon" name="windows11" />
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_x64-setup.exe`}
                use="primary"
                expand
              >
                Windows 64bit
              </ButtonLink>
            </ButtonGroup>
          </div>

          <div class="downloadsWindowsARM">
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_arm64-setup.exe`}
                use="primary"
                expand
              >
                Windows ARM 64bit
              </ButtonLink>
            </ButtonGroup>
          </div>

          {/* LINUX */}
          <div class="downloadsLinux">
            <Icon class="osIcon" name="linux" />
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_amd64.AppImage`}
                use="primary"
                expand
              >
                AppImage 64bit
              </ButtonLink>
            </ButtonGroup>
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_amd64.deb`}
                use="secondary"
                expand
              >
                .deb
              </ButtonLink>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks-${VERSION}-1.x86_64.rpm`}
                use="secondary"
                expand
              >
                .rpm
              </ButtonLink>
            </ButtonGroup>
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/museeks-x86_64.flatpak`}
                use="secondary"
                expand
              >
                Flatpak
              </ButtonLink>
            </ButtonGroup>
          </div>

          <div class="downloadsLinuxARM">
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_aarch64.AppImage`}
                use="primary"
                expand
              >
                AppImage ARM 64bit
              </ButtonLink>
            </ButtonGroup>
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks_${VERSION}_arm64.deb`}
                use="secondary"
                expand
              >
                .deb
              </ButtonLink>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/Museeks-${VERSION}-1.aarch64.rpm`}
                use="secondary"
                expand
              >
                .rpm
              </ButtonLink>
            </ButtonGroup>
            <ButtonGroup>
              <ButtonLink
                href={`${URL_PREFIX}${VERSION}/museeks-aarch64.flatpak`}
                use="secondary"
                expand
              >
                Flatpak
              </ButtonLink>
            </ButtonGroup>
          </div>
        </div>

        {/* FOOTER */}
        <footer class="footer">
          <div class="links">
            <a href="https://x.com/museeks">
              <Icon class="linksIcon" name="twitter" />
              <VisuallyHidden>X</VisuallyHidden>
            </a>
            <a
              href="https://github.com/martpie/museeks"
              title="Bugs reports, features requests and sources"
            >
              <Icon class="linksIcon" name="github" />
              <VisuallyHidden>Twitter</VisuallyHidden>
            </a>
          </div>
          <p class="madeBy textMuted">
            made with <span class="heart">♥</span> by{" "}
            <Link href="https://martpie.io" openInNewTab>@martpie</Link>{" "}
            and{" "}
            <Link
              href="https://github.com/martpie/museeks/graphs/contributors"
              openInNewTab
            >
              awesome people
            </Link>
          </p>
          <p class="madeBy textMuted">
            <Link
              href="https://github.com/martpie/museeks/releases/tag/0.22.0"
              openInNewTab
              >help translate <sup class="sup">new!</sup>
            </Link>
            •
            <Link href="/translations">status</Link>
          </p>
        </footer>
      </div>
    </main>
  </div>
</Layout>

<style scoped>
  body {
    overflow-x: hidden;
  }

  .container {
    display: flex;
    flex-direction: column;
    padding: 0 15px;
  }

  @media (min-width: 1024px) {
    .container {
      flex-direction: row-reverse;
    }
  }

  .main {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 3;

    @media screen and (min-width: 1024px) {
      min-height: 100vh;
    }
  }

  .screenshotWrapper {
    position: relative;
  }

  .screenshot {
    width: 1057px; /* 703px height */
    max-width: 100%;
    height: auto;
  }

  @media (min-width: 1024px) {
    .screenshotWrapper {
      flex: 1.5 0 auto;
      max-width: 700px;
    }

    .screenshot {
      position: absolute;
      margin-left: auto;
      margin-top: auto;
      margin-bottom: auto;
      right: 0;
      top: 0;
      bottom: 0;
      min-width: 550px;
      transition: transform ease-in-out 0.25s;
      transform: translateX(50%);
    }

    .screenshot:hover {
      transform: translateX(0);
    }
  }

  @media (min-width: 1200px) {
    .screenshot {
      min-width: 850px;
    }
  }

  @media (min-width: 1400px) {
    .screenshot {
      min-width: 1057px;
    }
  }

  @media (min-width: 2000px) {
    .container {
      max-width: 1600px;
      justify-content: center;
      margin: auto;
    }

    .screenshot {
      transform: none;
      margin: auto;
      left: 0;
    }

    .screenshotWrapper {
      flex: 2;
      max-width: initial;
    }

    .main {
      flex: 2;
    }
  }

  .downloads {
    width: 680px;
    max-width: 100%;
    margin: auto;
  }

  .downloadsTitle {
    margin-top: 0;
    text-align: center;
    font-weight: normal;
  }

  .downloadsMetas {
    text-align: center;
    margin-bottom: 30px;
  }

  .allDownloads {
    display: grid;
    grid-gap: 20px;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);

    @media (max-width: 767px) {
      max-width: 300px;
      margin: auto;
      grid-template-columns: 1fr;
      grid-template-rows: auto;
    }
  }

  .downloadsMac {
    grid-area: 1 / 1 / 2 / 2;

    @media (max-width: 767px) {
      grid-area: auto;
    }
  }

  .downloadsWindows {
    grid-area: 1 / 2 / 2 / 3;

    @media (max-width: 767px) {
      grid-area: auto;
    }
  }

  .downloadsWindowsARM {
    grid-area: 2 / 2 / 3 / 3;

    @media (max-width: 767px) {
      grid-area: auto;
    }
  }

  .downloadsLinux {
    grid-area: 1 / 3 / 2 / 4;

    @media (max-width: 767px) {
      grid-area: auto;
    }
  }

  .downloadsLinuxARM {
    grid-area: 2 / 3 / 3 / 4;

    @media (max-width: 1023px) {
      grid-area: auto;
    }
  }

  :global(.osIcon) {
    display: block;
    margin-bottom: 20px;
    width: 1.8rem;
    height: auto;
    margin-inline: auto;
  }

  .heart {
    color: var(--heart);
  }

  .links {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-bottom: 20px;
    font-size: 1.6rem;
  }

  :global(.linksIcon) {
    display: block;
    width: 1.5rem;
    height: auto;
    margin-inline: auto;
  }

  .madeBy {
    text-align: center;
  }

  .textMuted {
    color: var(--text-muted);
    font-size: 0.875rem;
  }

  .sup {
    color: #ff3074;
  }

  :global(.fab) {
    font-family: --fa-style-family-brands;
  }
</style>
